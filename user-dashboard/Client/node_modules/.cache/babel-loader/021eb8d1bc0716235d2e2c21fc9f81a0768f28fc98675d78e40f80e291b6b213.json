{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\UserOffice\\\\Desktop\\\\dashboard_react\\\\user-dashboard\\\\src\\\\components\\\\USMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson-client';\nimport us from './us.json'; // Ensure you have the US topojson data\nimport '../App.css'; // Correct path to App.css\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USMap = ({\n  data = []\n}) => {\n  _s();\n  const svgRef = useRef();\n  const [popupData, setPopupData] = useState(null);\n  useEffect(() => {\n    const svg = d3.select(svgRef.current).attr('viewBox', `0 0 960 600`) // Adjust viewBox to include all states\n    .attr('preserveAspectRatio', 'xMidYMid meet') // Preserve aspect ratio\n    .attr('width', '100%') // Responsive width\n    .attr('height', '100%') // Responsive height\n    .attr('style', 'max-width: 100%; height: auto;');\n    const path = d3.geoPath();\n    const g = svg.append('g');\n\n    // Ensure data is defined and is an array\n    const stateDataMap = (Array.isArray(data) ? data : []).reduce((acc, item) => {\n      acc[item.state] = item.count;\n      return acc;\n    }, {});\n    const states = g.append('g').attr('fill', '#041C2C').attr('cursor', 'pointer').selectAll('path').data(topojson.feature(us, us.objects.states).features).join('path').on('mouseover', function (event, d) {\n      d3.select(this).attr('fill', '#F0B323');\n    }).on('mouseout', function (event, d) {\n      d3.select(this).attr('fill', '#041C2C');\n      setPopupData(null);\n    }).on('click', function (event, d) {\n      const coords = d3.pointer(event);\n      const container = svg.node().getBoundingClientRect();\n      const popupWidth = 250; // Adjust as necessary\n      const popupHeight = 200; // Adjust as necessary\n\n      // Offset values to position the popup off-centered\n      const offsetX = 10;\n      const offsetY = 10;\n      let x = coords[0] + offsetX;\n      let y = coords[1] + offsetY;\n\n      // Adjust x position to ensure popup is within bounds\n      if (x + popupWidth > container.width) {\n        x = container.width - popupWidth;\n      } else if (x < 0) {\n        x = 0;\n      }\n\n      // Adjust y position to ensure popup is within bounds\n      if (y + popupHeight > container.height) {\n        y = container.height - popupHeight;\n      } else if (y < 0) {\n        y = 0;\n      }\n      setPopupData({\n        name: d.properties.name,\n        count: stateDataMap[d.id] || 0,\n        coords: [x, y]\n      });\n    }).attr('d', path);\n    states.append('title').text(d => d.properties.name);\n    g.append('path').attr('fill', 'none').attr('stroke', 'white').attr('stroke-width', 2) // Increase the stroke width\n    .attr('stroke-linejoin', 'round').attr('d', path(topojson.mesh(us, us.objects.states, (a, b) => a !== b)));\n  }, [data]); // Re-run the effect when data changes\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"us-map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), popupData && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      style: {\n        left: `${popupData.coords[0]}px`,\n        top: `${popupData.coords[1]}px`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: popupData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Users: \", popupData.count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(USMap, \"D2RpjD9gZd9KPJ2AY6yTUOFpaOc=\");\n_c = USMap;\nexport default USMap;\nvar _c;\n$RefreshReg$(_c, \"USMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","topojson","us","jsxDEV","_jsxDEV","USMap","data","_s","svgRef","popupData","setPopupData","svg","select","current","attr","path","geoPath","g","append","stateDataMap","Array","isArray","reduce","acc","item","state","count","states","selectAll","feature","objects","features","join","on","event","d","coords","pointer","container","node","getBoundingClientRect","popupWidth","popupHeight","offsetX","offsetY","x","y","width","height","name","properties","id","text","mesh","a","b","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","style","left","top","_c","$RefreshReg$"],"sources":["C:/Users/UserOffice/Desktop/dashboard_react/user-dashboard/src/components/USMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport * as topojson from 'topojson-client';\r\nimport us from './us.json'; // Ensure you have the US topojson data\r\nimport '../App.css'; // Correct path to App.css\r\n\r\nconst USMap = ({ data = [] }) => {\r\n  const svgRef = useRef();\r\n  const [popupData, setPopupData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('viewBox', `0 0 960 600`) // Adjust viewBox to include all states\r\n      .attr('preserveAspectRatio', 'xMidYMid meet') // Preserve aspect ratio\r\n      .attr('width', '100%') // Responsive width\r\n      .attr('height', '100%') // Responsive height\r\n      .attr('style', 'max-width: 100%; height: auto;');\r\n\r\n    const path = d3.geoPath();\r\n\r\n    const g = svg.append('g');\r\n\r\n    // Ensure data is defined and is an array\r\n    const stateDataMap = (Array.isArray(data) ? data : []).reduce((acc, item) => {\r\n      acc[item.state] = item.count;\r\n      return acc;\r\n    }, {});\r\n\r\n    const states = g.append('g')\r\n      .attr('fill', '#041C2C')\r\n      .attr('cursor', 'pointer')\r\n      .selectAll('path')\r\n      .data(topojson.feature(us, us.objects.states).features)\r\n      .join('path')\r\n      .on('mouseover', function(event, d) {\r\n        d3.select(this).attr('fill', '#F0B323');\r\n      })\r\n      .on('mouseout', function(event, d) {\r\n        d3.select(this).attr('fill', '#041C2C');\r\n        setPopupData(null);\r\n      })\r\n      .on('click', function(event, d) {\r\n        const coords = d3.pointer(event);\r\n        const container = svg.node().getBoundingClientRect();\r\n        const popupWidth = 250; // Adjust as necessary\r\n        const popupHeight = 200; // Adjust as necessary\r\n\r\n        // Offset values to position the popup off-centered\r\n        const offsetX = 10;\r\n        const offsetY = 10;\r\n\r\n        let x = coords[0] + offsetX;\r\n        let y = coords[1] + offsetY;\r\n\r\n        // Adjust x position to ensure popup is within bounds\r\n        if (x + popupWidth > container.width) {\r\n          x = container.width - popupWidth;\r\n        } else if (x < 0) {\r\n          x = 0;\r\n        }\r\n\r\n        // Adjust y position to ensure popup is within bounds\r\n        if (y + popupHeight > container.height) {\r\n          y = container.height - popupHeight;\r\n        } else if (y < 0) {\r\n          y = 0;\r\n        }\r\n\r\n        setPopupData({\r\n          name: d.properties.name,\r\n          count: stateDataMap[d.id] || 0,\r\n          coords: [x, y]\r\n        });\r\n      })\r\n      .attr('d', path);\r\n\r\n    states.append('title')\r\n      .text(d => d.properties.name);\r\n\r\n    g.append('path')\r\n      .attr('fill', 'none')\r\n      .attr('stroke', 'white')\r\n      .attr('stroke-width', 2) // Increase the stroke width\r\n      .attr('stroke-linejoin', 'round')\r\n      .attr('d', path(topojson.mesh(us, us.objects.states, (a, b) => a !== b)));\r\n  }, [data]); // Re-run the effect when data changes\r\n\r\n  return (\r\n    <div className=\"us-map-container\">\r\n      <svg ref={svgRef}></svg>\r\n      {popupData && (\r\n        <div className=\"popup\" style={{\r\n          left: `${popupData.coords[0]}px`,\r\n          top: `${popupData.coords[1]}px`\r\n        }}>\r\n          <h4>{popupData.name}</h4>\r\n          <p>Users: {popupData.count}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default USMap;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}